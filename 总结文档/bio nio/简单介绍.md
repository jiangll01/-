假如有10000个连接，4核CPU ，那么bio 就需要一万个线程，而nio大概就需要5个线程(一个接收请求，四个处理请求)。如果这10000个连接同时请求，那么bio就有10000个线程抢四个CPU ，几乎每个CPU 平均执行2500次上下文切换，而nio 四个处理线程，几乎每个线程都对应一个CPU ，也就是几乎没有上下文切换。效率就体现出来了。

作者：贺拔达奚
链接：https://www.zhihu.com/question/59356897/answer/166129708
来源：知乎
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。



首先明确一点，技术没有优劣，只有适不适合，能解决当前问题的技术就是好技术。BIO不一定比NIO效率差，就和单线程不一定比多线程效率低一样。
举个通俗例子吧，假如有一个饭店，只有一个厨师，如果每天只来一个客人，厨师一个人接待、做饭、上菜和结账，效率很好（没有中间人，直接接受顾客消息）。如果有十个同样的厨师和顾客，效率也是很高。如果顾客再多，厨师无法增加，这个时候一个厨师得服务多个顾客，顾客只能排队，而顾客也不知道啥时候能排到自己，只能死等，不时去问厨师轮到自己没有，这就是NIO。假如你去的是肯德基，流水很快，你等等也无妨，反而你付款后到外面做其他事情会影响效率，NIO这时候依然很快。NIO可以总结为“我要读”，这里是“我要点菜”。如果在一个海鲜酒楼，那就很坑了，你肯定不乐意一直等，这时候怎么提高效率呢？加一个服务员呀，如果没空位，你先把联系方式给服务员，自己就可以去干其他事情了，服务员发现有空余厨师的时候，她会通知你，告诉你可以准备点餐了。这就是NIO，总结一下就是“可以读”了，这里是“我可以点餐了”。如果是异步NIO就更好了，成了“您要的菜已经好了”。
本质上，NIO是逻辑分层、职责单一、空间换时间的体现。如上例子就是，除了厨师，加入服务员、传菜员，收银员等角色；每个角色熟练本质工作，不用频繁切换角色造成浪费（如换厨师服）；角色增加，人员增加，空间消耗必然增大。